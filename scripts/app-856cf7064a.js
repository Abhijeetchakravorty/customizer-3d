!function(){"use strict";angular.module("sites",["ngResource","ui.router","ui.bootstrap","toastr","ngFileUpload","base64"])}(),function(){"use strict";function e(e,n){function t(){p.position.set(U.x_axis,200,95)}function i(){g.position.set(-80,200,-165)}function o(e){j.load(e,function(e){e.traverse(function(n){n instanceof THREE.Mesh&&(R=e,e.scale.x=30,e.scale.y=30,e.scale.z=30,e.position.x=120,e.position.y=-200,e.position.z=0,void 0!=m&&(n.material.map=m),e.updateMatrix(),b&&h.remove(b),h.add(e),b=e)})})}function a(){d=document.getElementById("webGLContainer"),c=document.getElementsByClassName("mainContainer"),u=document.getElementById("sideNav"),document.getElementsByClassName("mainContainer")[0].style.width=window.innerWidth-400+"px",document.getElementById("sideNav").style.width="400px",h=new THREE.Scene,h.fog=new THREE.Fog(13426943,500,1e4),w=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1e4),w.target=new THREE.Vector3(0,0,0),w.position.set(200,200,1e3),h.add(w);var e;h.add(new THREE.AmbientLight(6710886)),e=new THREE.DirectionalLight(14674943,1.75),e.position.set(50,200,100),e.position.multiplyScalar(1.3),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024;var n=300;e.shadow.camera.left=-n,e.shadow.camera.right=n,e.shadow.camera.top=n,e.shadow.camera.bottom=-n,e.shadow.camera.far=1e3,h.add(e);var t=(new THREE.TextureLoader,new THREE.SphereGeometry(1500,60,40));t.scale(-1,1,1);var i=new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("assets/images/store-image-one.jpg")});v=new THREE.Mesh(t,i),h.add(v),E=new THREE.WebGLRenderer({antialias:!0}),E.setPixelRatio(window.devicePixelRatio),E.setSize(window.innerWidth-400,window.innerHeight),E.setClearColor(h.fog.color),c[0].appendChild(E.domElement),E.gammaInput=!0,E.gammaOutput=!0,E.shadowMap.enabled=!0,f=new THREE.OrbitControls(w,E.domElement),f.maxPolarAngle=.4*Math.PI,f.minDistance=150,f.maxDistance=1e3,window.addEventListener("resize",s,!1),o("app/base/interior.3ds.json")}function r(){requestAnimationFrame(r),l()}function s(){w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),E.setSize(window.innerWidth,window.innerHeight)}function l(){E.render(h,w)}var c,d,u,m,p,g,w,h,E,f,b,v,R,H,T,x=0,C=0,y=[],M=null,j=new THREE.AssimpJSONLoader,z=new THREE.Raycaster,L=new THREE.Vector3,F=!1,k={x:0,y:0},U=this;U.clickedColor=function(e){R.traverse(function(n){n instanceof THREE.Mesh&&n.material.color.setHex(e)})},U.x_axis=-80,U.number_changed=function(){t()};new THREE.ImageLoader;a(),e.fileNameChanged=function(n){var t=new FileReader;t.readAsDataURL(n.files[0]),t.onload=function(n){if(C++,C>1){h.remove(g);for(var t=0;t<y.length;t++)console.log(y[t].position.z),y[t].position.z<1&&(console.log("hi i sm here"),y.splice(t,1))}e.backDataUrl=n.target.result;var o=(new THREE.TextureLoader).load(e.backDataUrl);T=new THREE.PlaneGeometry(200,150,0);var a=new THREE.MeshBasicMaterial({map:o,transparent:!0});g=new THREE.Mesh(T,a),g.rotateY(-Math.PI/180*185),i(),h.add(g),y.push(g),console.log(y)}},e.frontImageChanged=function(n){var i=new FileReader;i.readAsDataURL(n.files[0]),i.onload=function(n){if(x++,x>1){h.remove(p);for(var i=0;i<y.length;i++)console.log(y[i].position.z),y[i].position.z>1&&(console.log("hi i sm here"),y.splice(i,1))}e.dataUrl=n.target.result;var o=(new THREE.TextureLoader).load(e.dataUrl);H=new THREE.PlaneGeometry(200,150,0);var a=new THREE.MeshBasicMaterial({map:o,transparent:!0});p=new THREE.Mesh(H,a),t(),h.add(p),y.push(p),console.log(y)}},e.wrapImageChanged=function(n){var t=new FileReader;t.readAsDataURL(n.files[0]),t.onload=function(n){e.textureUrl=n.target.result,m=(new THREE.TextureLoader).load(e.textureUrl),m.wrapS=THREE.ClampToEdgeWrapping,m.wrapT=THREE.RepeatWrapping,m.needsUpdate=!0,m.repeat.set(2,2),o("app/base/interior.3ds.json")}},r();var W=0;$(E.domElement).on("mousedown",function(e){W++,F=!0;var n=(new THREE.Projector,e.clientX/E.domElement.clientWidth*2-1),t=2*-(e.clientY/E.domElement.clientHeight)+1,i=new THREE.Vector3(n,t,.5);i.unproject(w),z.set(w.position,i.sub(w.position).normalize());var o=z.intersectObjects(y);if(1==W)if(o.length>0)if(f.enableRotate=!1,M=o[0].object,o[0].point.z<0){var o=z.intersectObject(g);L.copy(o[0].point).sub(g.position)}else{var o=z.intersectObject(p);L.copy(o[0].point).sub(p.position)}else f.enableRotate=!0,M=null,W=0;else f.enableRotate=!0,W=0,M=null}).on("mousemove",function(e){var n=e.clientX/E.domElement.clientWidth*2-1,t=2*-(e.clientY/E.domElement.clientHeight)+1;({x:e.offsetX-k.x,y:e.offsetY-k.y});if(F&&!f.enableRotate){var i=new THREE.Vector3(n,t,1);if(i.unproject(w),z.set(w.position,i.sub(w.position).normalize()),M){if(M.position.z<0)var o=z.intersectObject(g);else var o=z.intersectObject(p);void 0!=o[0]&&M.position.copy(o[0].point.sub(L))}}else M=null})}e.$inject=["$scope","$base64"],angular.module("sites").controller("BaseController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("sites").run(e)}(),function(){"use strict";function e(e,n){e.state("home",{url:"/",templateUrl:"app/base/base.html",controller:"BaseController",controllerAs:"base"}),n.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sites").config(e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{assimpUrl:"=assimpUrl"},link:function(e,n,t){function i(e){m.load(e,function(e){console.log(e),e.scale.x=e.scale.y=e.scale.z=.2,e.updateMatrix(),u&&c.remove(u),c.add(e),u=e})}function o(){l=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,2e3),l.position.set(2,4,5),c=new THREE.Scene,c.fog=new THREE.FogExp2(0,.035),c.add(new THREE.AmbientLight(13421772));var e=new THREE.DirectionalLight(15658734);e.position.x=Math.random()-.5,e.position.y=Math.random()-.5,e.position.z=Math.random()-.5,e.position.normalize(),c.add(e),d=new THREE.WebGLRenderer,d.setSize(window.innerWidth,window.innerHeight),n[0].appendChild(d.domElement),window.addEventListener("resize",a,!1)}function a(e){d.setSize(window.innerWidth,window.innerHeight),l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix()}function r(){requestAnimationFrame(r),s()}function s(){var e=5e-4*Date.now();l.position.x=10*Math.cos(e),l.position.y=4,l.position.z=10*Math.sin(e),l.lookAt(c.position),d.render(c,l)}var l,c,d,u;o();var m=new THREE.AssimpJSONLoader;e.$watch("assimpUrl",function(e,n){e!=n&&i(e)}),i(e.assimpUrl),r()}}}function n(e){return{link:function(e,n,t){n.bind("change",function(e){for(var n=0;n<e.target.files.length;n++)$("#image-preview").append('<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"><img class="img-responsive" src="'+e.target.value+'"/></div>')})}}}n.$inject=["$resource"],angular.module("sites").directive("tjsModelViewer",e).directive("ngFileSelect",n)}(),function(){"use strict";angular.module("sites").constant("moment",moment)}(),function(){"use strict";function e(e,n){}e.$inject=["$logProvider","toastrConfig"],angular.module("sites").config(e)}(),angular.module("sites").run(["$templateCache",function(e){e.put("app/base/base.html",'<!-- <tjs-model-viewer assimp-url="assimpModelUrl"></tjs-model-viewer> --><div id=webGLContainer><div class=mainContainer id=canvasElement></div><div id=sideNav><div class=row><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><button class="btn btn-primary btn-change-color" id=change-red-color ng-click="base.clickedColor(\'0xC63333\')">Red Color</button> <button class="btn btn-primary btn-change-color" id=change-black-color ng-click="base.clickedColor(\'0x000000\')">Black Color</button> <button class="btn btn-primary btn-change-color" id=change-green-color ng-click="base.clickedColor(\'0x00FF00\')">Lime Green Color</button> <button class="btn btn-primary btn-change-color" id=change-orange-color ng-click="base.clickedColor(\'0xFF4500\')">orange Color</button> <button class="btn btn-primary btn-change-color" id=change-white-color ng-click="base.clickedColor(\'0xFFFFFF\')">White Color</button><!-- <button class="btn btn-primary btn-change-color" id="upload-image">\n					Image Upload\n				</button> --></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"><input type=file name=file id=file-6 class=inputFile accept=image/* base-sixty-four-input onchange=angular.element(this).scope().frontImageChanged(this)></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"><input ng-model=get_image_detail type=file name=file id=file-5 class="inputfile inputfile-4" accept=image/* base-sixty-four-input onchange=angular.element(this).scope().fileNameChanged(this)></div></div><div class=row><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><input type=file name=file id=file-6 class=inputFile accept=image/* base-sixty-four-input onchange=angular.element(this).scope().wrapImageChanged(this)></div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-856cf7064a.js.map
